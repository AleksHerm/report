text_mean <- paste0("Mean = ", format_value(mean(x)))
text_median <- paste0("Median = ", format_value(median(x)))
# Dispersion
text_mad <- paste0(" ± ", format_value(mad(x)))
text_sd <- paste0(" ± ", format_value(sd(x)))
# Range
text_range = paste0(" [", format_value(min(x)), ", ", format_value(max(x)), "]")
text_full <- paste0(text_mean, text_sd, ", ", text_median, text_mad, ", Range", text_range)
text_full
data.frame(Mean = mean(x))
x <- rnorm(1000)
data.frame(Mean = mean(x))
# Table
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Missing=sum(is.na(x)),
n_Obs=length(x))
table_full
table_full$Mean[1]
# Selection ---------------------------------------------------------------
table <- table_full
library(dplyr)
table <- dplyr::select(table_full, quo(-Mean))
table <- dplyr::select(table_full, enquo(-Mean))
table <- dplyr::select(table_full, !!enquo(-Mean))
table <- dplyr::select(table_full, !!quo(-Mean))
vignette("programming")
table
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x)
n_Missing=sum(is.na(x)),
perc_Missing=n_Missing/n_Obs)
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)),
perc_Missing=n_Missing/n_Obs)
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
report.numeric <- function(x, median=FALSE, dispersion=TRUE, range=TRUE, missing_percentage=FALSE, ...) {
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
# Text --------------------------------------------------------------------
# Centrality
text_mean <- paste0("Mean = ", format_value(table_full$Mean[1]))
text_median <- paste0("Median = ", format_value(table_full$Median[1]))
# Dispersion
text_sd <- paste0(", SD = ", format_value(table_full$SD[1]))
text_mad <- paste0(", MAD = ", format_value(table_full$MAD[1]))
# Range
text_range = paste0(" [", format_value(table_full$Min[1]), ", ", format_value(table_full$Max[1]), "]")
# Missings
if(table_full$n_Missing[1] > 0){
if(missing_percentage == TRUE){
text_missing = paste0(", ", format_value(table_full$perc_Missing[1]), "% missing.")
} else{
text_missing = paste0(", ", format_value(table_full$n_Missing[1]), " missing.")
}
} else{
text_missing = ""
}
# Selection ---------------------------------------------------------------
table <- table_full
if(median == TRUE){
if(dispersion == TRUE){
text <- paste0(text_median, text_mad)
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
} else{
text <- text_median
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD), !!quo(-MAD))
}
} else{
if(dispersion == TRUE){
text <- paste0(text_mean, text_sd)
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD))
} else{
text <- text_mean
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD), !!quo(-SD))
}
}
if(range == TRUE){
text <- paste0(text, text_range)
} else{
table <- dplyr::select(table, !!quo(-Min), !!quo(-Max))
}
if(missing_percentage == TRUE){
table <- dplyr::select(table, !!quo(-n_Missing))
} else{
table <- dplyr::select(table, !!quo(-perc_Missing))
}
# Text
text_full <- paste0(text_mean, text_sd, ", ", text_median, text_mad, ", Range = ", text_range, text_missing)
out <- list(text=text,
text_full=text_full,
table=table,
table_full=table_full)
return(out)
}
library(report)
report.numeric(x)
report.numeric <- function(x, median=FALSE, dispersion=TRUE, range=TRUE, missing_percentage=FALSE, ...) {
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
# Text --------------------------------------------------------------------
# Centrality
text_mean <- paste0("Mean = ", format_value(table_full$Mean[1]))
text_median <- paste0("Median = ", format_value(table_full$Median[1]))
# Dispersion
text_sd <- paste0(", SD = ", format_value(table_full$SD[1]))
text_mad <- paste0(", MAD = ", format_value(table_full$MAD[1]))
# Range
text_range = paste0("[", format_value(table_full$Min[1]), ", ", format_value(table_full$Max[1]), "]")
# Missings
if(missing_percentage == TRUE){
text_missing = paste0(", ", format_value(table_full$perc_Missing[1]), "% missing.")
} else{
text_missing = paste0(", ", format_value(table_full$n_Missing[1]), " missing.")
}
# Selection ---------------------------------------------------------------
table <- table_full
if(median == TRUE){
if(dispersion == TRUE){
text <- paste0(text_median, text_mad)
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
} else{
text <- text_median
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD), !!quo(-MAD))
}
} else{
if(dispersion == TRUE){
text <- paste0(text_mean, text_sd)
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD))
} else{
text <- text_mean
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD), !!quo(-SD))
}
}
if(range == TRUE){
text <- paste0(text, text_range)
} else{
table <- dplyr::select(table, !!quo(-Min), !!quo(-Max))
}
if(missing_percentage == TRUE){
table <- dplyr::select(table, !!quo(-n_Missing))
} else{
table <- dplyr::select(table, !!quo(-perc_Missing))
}
# Text
text_full <- paste0(text_mean, text_sd, ", ", text_median, text_mad, ", Range = ", text_range, text_missing)
if(table_full$n_Missing[1] > 0){
text <- paste0(text, text_missing)
}
out <- list(text=text,
text_full=text_full,
table=table,
table_full=table_full)
return(out)
}
report.numeric(x, median=TRUE, dispersion=TRUE, range=TRUE, missing_percentage=TRUE)
report.numeric <- function(x, median=FALSE, dispersion=TRUE, range=TRUE, missing_percentage=FALSE, ...) {
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
# Text --------------------------------------------------------------------
# Centrality
text_mean <- paste0("Mean = ", format_value(table_full$Mean[1]))
text_median <- paste0("Median = ", format_value(table_full$Median[1]))
# Dispersion
text_sd <- paste0(", SD = ", format_value(table_full$SD[1]))
text_mad <- paste0(", MAD = ", format_value(table_full$MAD[1]))
# Range
text_range = paste0("[", format_value(table_full$Min[1]), ", ", format_value(table_full$Max[1]), "]")
# Missings
if(missing_percentage == TRUE){
text_missing = paste0(", ", format_value(table_full$perc_Missing[1], 1), "% missing.")
} else{
text_missing = paste0(", ", format_value(table_full$n_Missing[1]), " missing.")
}
# Selection ---------------------------------------------------------------
table <- table_full
if(median == TRUE){
if(dispersion == TRUE){
text <- paste0(text_median, text_mad)
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
} else{
text <- text_median
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD), !!quo(-MAD))
}
} else{
if(dispersion == TRUE){
text <- paste0(text_mean, text_sd)
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD))
} else{
text <- text_mean
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD), !!quo(-SD))
}
}
if(range == TRUE){
text <- paste0(text, text_range)
} else{
table <- dplyr::select(table, !!quo(-Min), !!quo(-Max))
}
if(missing_percentage == TRUE){
table <- dplyr::select(table, !!quo(-n_Missing))
} else{
table <- dplyr::select(table, !!quo(-perc_Missing))
}
# Text
text_full <- paste0(text_mean, text_sd, ", ", text_median, text_mad, ", Range = ", text_range, text_missing)
if(table_full$n_Missing[1] > 0){
text <- paste0(text, text_missing)
}
out <- list(text=text,
text_full=text_full,
table=table,
table_full=table_full)
return(out)
}
report.numeric <- function(x, median=FALSE, dispersion=TRUE, range=TRUE, missing_percentage=FALSE, ...) {
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
# Text --------------------------------------------------------------------
# Centrality
text_mean <- paste0("Mean = ", format_value(table_full$Mean[1]))
text_median <- paste0("Median = ", format_value(table_full$Median[1]))
# Dispersion
text_sd <- paste0(", SD = ", format_value(table_full$SD[1]))
text_mad <- paste0(", MAD = ", format_value(table_full$MAD[1]))
# Range
text_range = paste0(" [", format_value(table_full$Min[1]), ", ", format_value(table_full$Max[1]), "]")
# Missings
if(missing_percentage == TRUE){
text_missing = paste0(", ", format_value(table_full$perc_Missing[1], 1), "% missing.")
} else{
text_missing = paste0(", ", format_value(table_full$n_Missing[1]), " missing.")
}
# Selection ---------------------------------------------------------------
table <- table_full
if(median == TRUE){
if(dispersion == TRUE){
text <- paste0(text_median, text_mad)
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
} else{
text <- text_median
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD), !!quo(-MAD))
}
} else{
if(dispersion == TRUE){
text <- paste0(text_mean, text_sd)
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD))
} else{
text <- text_mean
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD), !!quo(-SD))
}
}
if(range == TRUE){
text <- paste0(text, text_range)
} else{
table <- dplyr::select(table, !!quo(-Min), !!quo(-Max))
}
if(missing_percentage == TRUE){
table <- dplyr::select(table, !!quo(-n_Missing))
} else{
table <- dplyr::select(table, !!quo(-perc_Missing))
}
# Text
text_full <- paste0(text_mean, text_sd, ", ", text_median, text_mad, ", Range =", text_range, text_missing)
if(table_full$n_Missing[1] > 0){
text <- paste0(text, text_missing)
}
out <- list(text=text,
text_full=text_full,
table=table,
table_full=table_full)
return(out)
}
report.numeric(x)
report.numeric(x, median=TRUE, dispersion=TRUE, range=TRUE, missing_percentage=TRUE)
report.numeric <- function(x, median=FALSE, dispersion=TRUE, range=TRUE, missing_percentage=FALSE, ...) {
# Table -------------------------------------------------------------------
table_full <- data.frame(Mean = mean(x),
SD = sd(x),
Median = median(x),
MAD = mad(x),
Min=min(x),
Max=max(x),
n_Obs=length(x),
n_Missing=sum(is.na(x)))
table_full$perc_Missing <- table_full$n_Missing/table_full$n_Obs
# Text --------------------------------------------------------------------
# Centrality
text_mean <- paste0("Mean = ", format_value(table_full$Mean[1]))
text_median <- paste0("Median = ", format_value(table_full$Median[1]))
# Dispersion
text_sd <- format_value(table_full$SD[1])
text_mad <- format_value(table_full$MAD[1])
# Range
text_range = paste0(" [", format_value(table_full$Min[1]), ", ", format_value(table_full$Max[1]), "]")
# Missings
if(missing_percentage == TRUE){
text_missing = paste0(", ", format_value(table_full$perc_Missing[1], 1), "% missing.")
} else{
text_missing = paste0(", ", format_value(table_full$n_Missing[1]), " missing.")
}
# Selection ---------------------------------------------------------------
table <- table_full
if(median == TRUE){
if(dispersion == TRUE){
text <- paste0(text_median, " +- ", text_mad)
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
} else{
text <- text_median
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD), !!quo(-MAD))
}
} else{
if(dispersion == TRUE){
text <- paste0(text_mean, " +- ", text_sd)
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD))
} else{
text <- text_mean
table <- dplyr::select(table, !!quo(-Median), !!quo(-MAD), !!quo(-SD))
}
}
if(range == TRUE){
text <- paste0(text, text_range)
} else{
table <- dplyr::select(table, !!quo(-Min), !!quo(-Max))
}
if(missing_percentage == TRUE){
table <- dplyr::select(table, !!quo(-n_Missing))
} else{
table <- dplyr::select(table, !!quo(-perc_Missing))
}
# Text
text_full <- paste0(text_mean, ", SD = ", text_sd, ", ",
text_median, ", MAD = ", text_mad, ", Range =",
text_range, text_missing)
if(table_full$n_Missing[1] > 0){
text <- paste0(text, text_missing)
}
out <- list(text=text,
text_full=text_full,
table=table,
table_full=table_full)
return(out)
}
report.numeric(x)
report.numeric(x, median=TRUE, dispersion=TRUE, range=TRUE, missing_percentage=TRUE)
library(report)
# Selection ---------------------------------------------------------------
table <- table_full
table <- dplyr::select(table, !!quo(-Mean), !!quo(-SD))
# Selection ---------------------------------------------------------------
table <- table_full
table <- dplyr::select(table, !!quo("-Mean"), !!quo("-SD"))
table <- dplyr::select(table, !!enquo("-Mean"), !!enquo("-SD"))
dplyr::select(table, one_of("Mean"), !!quo(-SD))
dplyr::select(table, one_of("-Mean"), !!quo(-SD))
dplyr::select(table, -one_of("Mean"), !!quo(-SD))
dplyr::select(table, -one_of("Mean", "SD"))
library(report)
styler::style_pkg()
library(report)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report, full=TRUE)
#' Creates or tests for objects of class \link{report}.
#'
#' @param x an arbitrary R object.
#'
#' @export
is.report <- function(x) inherits(x, "report")
a <- is.report(x)
a
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report, full=TRUE)
print(report(x))
x <- output
x
class(x)
class(x) <- c("report", class(x))
as.report <- function(x){
class(x) <- c("report", class(x))
}
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report, full=TRUE)
r <- report(x)
class(x)
as.report <- function(x){
class(x) <- c("report", class(x))
return(x)
}
r
class(as.report(r))
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report, full=TRUE)
r <- report(x)
class(r)
r <- as.report(r)
class(r)
r
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report, full=TRUE)
print(x, full=TRUE)
print(report(x), full=TRUE)
x <- rnorm(1000)
report(x)
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report(x), full=TRUE)
r <- report(x)
r
class(r)
library(report)
library(report)
x <- rnorm(1000)
report(x)
report(x, median = TRUE, dispersion = TRUE, range = TRUE, missing_percentage = TRUE)
print(report(x), full=TRUE)
x <- rnorm(1000)
r <- report(x)
print(r)
print(r)
testthat::expect_is(print(r), "character")
testthat::expect_is(print(r), "character")
testthat::expect_is(r$text, "character")
a <- report(x)
class(a)
a <- print(report(x))
class(a)
testthat::expect_is(print(r), "character")
testthat::expect_equal(nrow(r$table), 1, tol=0)
r <- report(seq(0, 1, length.out = 100))
testthat::expect_is(print(r), "character")
r$table$Mean
testthat::expect_error(r$table$Median, 0.5, tol=0)
r$table$Median
testthat::expect_null(r$table$Median, 0.5, tol=0)
testthat::expect_null(r$table$Median)
r <- report(seq(0, 1, length.out = 100), median = TRUE, range=FALSE, dispersion=FALSE, missing_percentage = TRUE)
testthat::expect_null(r$table$Min)
r$table$perc_Missing
testthat::expect_equal(r$table$perc_Missing, 0, tol=0)
testthat::expect_true(is.report(r))
