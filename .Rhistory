} else if(!is.rules(rules)){
stop("The rules set must be an object of type rules.")
} else{
text <- interpret(abs(r), rules)
}
if(direction == TRUE){
text <- ifelse(r >= 0, paste0("positive and ", text), paste0("negative and ", text))
}
return(text)
}
interpret_r(r=c(.5, -.02))
library(report)
x <- t.test(iris$Sepal.Width, iris$Sepal.Length)
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length)
effsize = "cohen1988"
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
library(dplyr)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
table_full
interpretation <- interpretation_r(table_full$r[1])
interpretation <- interpret_r(table_full$r[1])
interpretation
interpret_direction <- function(x) {
return(ifelse(x > 0, "positive", "negative"))
}
interpret_direction(.02)
interpret_direction(c(.5, .02))
interpret_direction(c(.5, -.02))
interpret_r(c(0.5, -0.08))
# Text
values <- as.list(table_full)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
# Correlation -------------------------------------------------------------
if (grepl("correlation", table_full$Method[1])) {
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
}
# Text
values <- as.list(table_full)
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
}
# Text
values <- as.list(table_full)
text <- paste0(
"The ",
values$Method,
" between ",
x$data.name,
" is ",
format_p(values$p),
", ",
interpret_r(values$effect, rules = effsize_rules),
" (r(",
format_digit(values$df),
") = ",
format_digit(values$effect),
", ",
values$CI_format,
", p ",
format_p(values$p, stars = FALSE),
")."
)
format_p(values$p)
format_p(values$p)
interpret_p(values$p)
effect <- paste0("r = ", format_value(table_full$r[1]))
effect
table_full$DoF[1]
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "spearman")
x
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "kendall")
x
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
library(dplyr)
library(report)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
if (grepl("correlation", table_full$Method[1])) {
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r = ", format_value(table_full$r[1]), ", t(",
table_full$DoF[1],") = ",
format_value(table_full$t[1]),
", ", format_CI(table_full$CI_low[1],
table_full$CI_low[2], CI=95))
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$t[1]))
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]), ", z = ",
format_value(table_full$z[1]))
}
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r = ", format_value(table_full$r[1]), ", t(",
table_full$DoF[1],") = ",
format_value(table_full$t[1]),
", ", format_CI(table_full$CI_low[1],
table_full$CI_low[2], CI=95))
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$t[1]))
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]), ", z = ",
format_value(table_full$z[1]))
}
effsize = "cohen1988"
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r = ", format_value(table_full$r[1]), ", t(",
table_full$DoF[1],") = ",
format_value(table_full$t[1]),
", ", format_CI(table_full$CI_low[1],
table_full$CI_low[2], CI=95))
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$t[1]))
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]), ", z = ",
format_value(table_full$z[1]))
}
# Text
values <- as.list(table_full)
text <- paste0(
"The ",
values$Method,
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
text
values$Method
text <- paste0(
"The ",
stringr::str_remove(values$Method, "product-moment "),
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
text
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "spearman")
x
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r = ", format_value(table_full$r[1]), ", t(",
table_full$DoF[1],") = ",
format_value(table_full$t[1]),
", ", format_CI(table_full$CI_low[1],
table_full$CI_high[1], CI=95))
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$t[1]))
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]), ", z = ",
format_value(table_full$z[1]))
}
# Text
values <- as.list(table_full)
text <- paste0(
"The ",
stringr::str_remove(values$Method, "product-moment "),
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$t[1]))
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$S[1]))
values <- as.list(table_full)
text <- paste0(
"The ",
stringr::str_remove(values$Method, "product-moment "),
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
# T-tests -------------------------------------------------------------
} else if (grepl("t-test", table_full$Method[1])) {
stop(paste0("`report()` for the ", table_full$Method[1], " is not implemented yet."))
# Other -------------------------------------------------------------
} else {
stop(paste0("`re
values <- as.list(table_full)
text <- paste0(
"The ",
stringr::str_remove(values$Method, "product-moment "),
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r = ", format_value(table_full$r[1]), ", t(",
table_full$DoF[1],") = ",
format_value(table_full$t[1]),
", ", format_CI(table_full$CI_low[1],
table_full$CI_high[1], CI=95))
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]), ", S = ",
format_value(table_full$S[1]))
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]), ", z = ",
format_value(table_full$z[1]))
}
# Text
values <- as.list(table_full)
text <- paste0(
"The ",
stringr::str_remove(values$Method, "product-moment "),
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
text
stringr::str_remove(values$Method, "product-moment ")
stringr::str_remove(values$Method, c("product-moment ", " rank"))
stringr::str_remove(values$Method, "product-moment | rank")
stringr::str_remove(values$Method, "product-moment | rank")
stringr::str_remove(values$Method, "product-moment | rank | rho")
stringr::str_remove(values$Method, "product-moment rank rho")
stringr::str_remove(values$Method, "product-moment & rank & rho")
if (grepl("Pearson", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
interpretation <- interpret_r(table_full$r[1], effsize)
effect <- paste0("r(", table_full$DoF[1],") = ",
format_value(table_full$r[1]), ", ",
format_CI(table_full$CI_low[1], table_full$CI_high[1], CI=95))
method <- "Pearson's correlation"
} else if (grepl("Spearman", table_full$Method[1])) {
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
interpretation <- interpret_direction(table_full$rho[1])
effect <- paste0("rho = ", format_value(table_full$rho[1]))
method <- "Spearman's correlation"
} else {
table_full <- table_full %>%
rename_if_possible("statistic", "z") %>%
rename_if_possible("estimate", "tau")
interpretation <- interpret_direction(table_full$tau[1])
effect <- paste0("tau = ", format_value(table_full$tau[1]))
method <- "Kendall's correlation"
}
# Text
values <- as.list(table_full)
text <- paste0(
"The ",
method,
" between ",
x$data.name,
" is ",
interpret_p(values$p),
", ",
interpretation,
" (", effect,
", p ",
format_p(values$p, stars = FALSE),
")."
)
text
table_full
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length)
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
table_full
table_full <- table_full %>%
rename_if_possible("statistic", "t") %>%
rename_if_possible("estimate", "r")
table_full
select(table_full, one_of("-t"))
select(table_full, -one_of("t"))
select(table_full, -one_of("t", "Method"))
x <- cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "spearman")
# Processing --------------------------------------------------------------
table_full <- broom::tidy(x) %>%
rename_if_possible("p.value", "p") %>%
rename_if_possible("conf.low", "CI_low") %>%
rename_if_possible("conf.high", "CI_high") %>%
rename_if_possible("parameter", "DoF") %>%
rename_if_possible("method", "Method") %>%
rename_if_possible("estimate1", "Mean_1") %>%
rename_if_possible("estimate2", "Mean_2") %>%
rename_if_possible("alternative", "Alternative")
table_full <- table_full %>%
rename_if_possible("statistic", "S") %>%
rename_if_possible("estimate", "rho")
table_full
library(report)
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length))
r
r$values$r
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "spearman"))
r$values$rho
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "kendall"))
r$values$tau
library(report)
# Correlations
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length))
r
testthat::expect_equal(r$values$r, -0.117, tol = 0.01)
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "spearman"))
testthat::expect_equal(r$values$rho, -0.166, tol = 0.01)
r <- report(cor.test(iris$Sepal.Width, iris$Sepal.Length, method = "kendall"))
testthat::expect_equal(r$values$tau, -0.076, tol = 0.01)
report(cor.test(iris$Sepal.Length, iris$Petal.Length))
